{"version":3,"sources":["components/Menu/styles.module.scss","components/Header/styles.module.scss","components/Container/styles.module.scss","components/Content/styles.module.scss","components/Logo/styles.module.scss","components/Container/index.js","components/Content/index.js","components/Logo/index.js","components/Header/index.js","components/Menu/index.js","constants.js","routes/MicroFrontend/index.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Container","props","children","className","styles","defaultProps","Content","Logo","Header","to","Header__LogoLink","ITEMS","name","Menu","Menu__List","map","item","Menu__ListItem","activeClassName","Menu__ListItemLink_active","Menu__ListItemLink","exact","MICROFRONTEND_NAME","MICROFRONTEND_HOST","process","TITLE","getContainerId","loadScript","src","Promise","resolve","reject","document","getElementById","script","createElement","onload","onerror","id","head","appendChild","loadStyle","href","link","rel","type","safetyCall","fn","args","undefined","makeAssetUrl","host","loadMicroFrontend","history","fetch","then","response","json","entrypoints","scripts","filter","e","test","all","window","renderMicrofrontend","catch","error","console","log","MicroFrontend","this","title","React","Component","createHashHistory","Browse","Restaurant","About","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.33e04706.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"styles_Menu__Z63CA\",\"Menu__List\":\"styles_Menu__List__2UKo3\",\"Menu__ListItem\":\"styles_Menu__ListItem__AT9MY\",\"Menu__ListItemLink\":\"styles_Menu__ListItemLink__3qk5D\",\"Menu__ListItemLink_active\":\"styles_Menu__ListItemLink_active__3GA8t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"styles_Header__2KoFd\",\"Header__LogoLink\":\"styles_Header__LogoLink__2qgsy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"styles_Container__2CW_S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"styles_Content__3ueQJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"styles_Logo__14oxi\"};","import PropTypes from 'prop-types'\n\nimport styles from './styles.module.scss'\n\nfunction Container(props) {\n  const { children } = props\n\n  return <div className={styles.Container}>{children}</div>\n}\n\nContainer.propTypes = {\n  children: PropTypes.any,\n}\nContainer.defaultProps = {\n  children: null,\n}\n\nexport default Container\n","import PropTypes from 'prop-types'\n\nimport styles from './styles.module.scss'\n\nfunction Content(props) {\n  const { children } = props\n\n  return <div className={styles.Content}>{children}</div>\n}\n\nContent.propTypes = {\n  children: PropTypes.any,\n}\nContent.defaultProps = {\n  children: null,\n}\n\nexport default Content\n","import styles from './styles.module.scss'\n\nfunction Logo() {\n  return <div className={styles.Logo}>üçΩ Feed Me</div>\n}\n\nexport default Logo\n","import { Link } from 'react-router-dom'\n\n// Components\nimport Logo from '../Logo'\n\nimport styles from './styles.module.scss'\n\nfunction Header() {\n  return (\n    <div className={styles.Header}>\n      <Link to=\"/\" className={styles.Header__LogoLink}>\n        <Logo />\n      </Link>\n    </div>\n  )\n}\n\nexport default Header\n","import { NavLink } from 'react-router-dom'\n\nimport styles from './styles.module.scss'\n\nconst ITEMS = [\n  {\n    to: '/',\n    name: 'Browse Restaurants',\n  },\n  {\n    to: '/about',\n    name: 'About',\n  },\n]\n\nfunction Menu() {\n  return (\n    <nav className={styles.Menu}>\n      <ul className={styles.Menu__List}>\n        {ITEMS.map((item) => (\n          <li className={styles.Menu__ListItem} key={item.to}>\n            <NavLink\n              activeClassName={styles.Menu__ListItemLink_active}\n              className={styles.Menu__ListItemLink}\n              exact\n              to={item.to}\n            >\n              {item.name}\n            </NavLink>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  )\n}\n\nexport default Menu\n","export const MICROFRONTEND_NAME = {\n  ABOUT: 'About',\n  BROWSE: 'Browse',\n  RESTAURANT: 'Restaurant',\n}\n\n// TODO: think about CORS\nexport const MICROFRONTEND_HOST = {\n  [MICROFRONTEND_NAME.ABOUT]: process.env.REACT_APP_MICROFRONTEND_HOST_ABOUT,\n  [MICROFRONTEND_NAME.BROWSE]: process.env.REACT_APP_MICROFRONTEND_HOST_BROWSE,\n  [MICROFRONTEND_NAME.RESTAURANT]:\n    process.env.REACT_APP_MICROFRONTEND_HOST_RESTAURANT,\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n// Constants\nimport { MICROFRONTEND_HOST, MICROFRONTEND_NAME } from '../../constants'\n\nconst TITLE = {\n  [MICROFRONTEND_NAME.ABOUT]: 'About',\n  [MICROFRONTEND_NAME.BROWSE]: 'Browse Restaurants',\n  [MICROFRONTEND_NAME.RESTAURANT]: 'Restaurant',\n}\n\nfunction getContainerId(name) {\n  return `${name}-container`\n}\n\nfunction loadScript(src) {\n  return new Promise((resolve, reject) => {\n    if (document.getElementById(src)) {\n      // console.log(`script \"${src}\": loaded`)\n      return resolve()\n    }\n    const script = document.createElement('script')\n    script.onload = resolve\n    script.onerror = reject\n    script.src = src\n    script.id = src\n    document.head.appendChild(script)\n  })\n}\n\nfunction loadStyle(href) {\n  return new Promise((resolve, reject) => {\n    if (document.getElementById(href)) {\n      // console.log(`link \"${href}\": loaded`)\n      return resolve()\n    }\n    const link = document.createElement('link')\n    link.onload = resolve\n    link.onerror = reject\n    link.rel = 'stylesheet'\n    link.type = 'text/css'\n    link.href = href\n    link.id = href\n    document.head.appendChild(link)\n  })\n}\n\nfunction safetyCall(fn, ...args) {\n  return typeof fn === 'function' ? fn(...args) : undefined\n}\n\nfunction renderMicrofrontend(name, history) {\n  safetyCall(window[`render${name}`], getContainerId(name), history)\n}\n\nfunction unmountMicrofrontend(name) {\n  safetyCall(window[`unmount${name}`], getContainerId(name))\n}\n\nconst makeAssetUrl = (host) => (script) => {\n  return `${host}/${script}`\n}\n\nfunction loadMicroFrontend({ name, history }) {\n  // console.log('loadMicroFrontend', { host })\n  const host = MICROFRONTEND_HOST[name]\n  if (!host) {\n    return\n  }\n  fetch(makeAssetUrl(host)('asset-manifest.json'))\n    .then((response) => response.json())\n    .then(({ entrypoints }) => {\n      const scripts = entrypoints\n        .filter((e) => /static\\/js/.test(e))\n        .map(makeAssetUrl(host))\n      const styles = entrypoints\n        .filter((e) => /static\\/css/.test(e))\n        .map(makeAssetUrl(host))\n      return Promise.all([...scripts.map(loadScript), ...styles.map(loadStyle)])\n    })\n    .then(() => {\n      // console.log('all scripts and styles are loaded')\n      renderMicrofrontend(name, history)\n    })\n    .catch((error) => {\n      console.log('error', error)\n    })\n}\n\nclass MicroFrontend extends React.Component {\n  componentDidMount() {\n    loadMicroFrontend(this.props)\n  }\n\n  componentDidUpdate() {\n    document.title = `${TITLE[this.props.name]} - Feed Me`\n  }\n\n  componentWillUnmount() {\n    unmountMicrofrontend(this.props.name)\n  }\n\n  render() {\n    const { history, name } = this.props\n    console.log(`MicroFrontend {${name}} history`, history)\n\n    return <main id={getContainerId(name)} />\n  }\n}\n\nMicroFrontend.propTypes = {\n  history: PropTypes.object.isRequired,\n  name: PropTypes.oneOf(Object.values(MICROFRONTEND_NAME)).isRequired,\n}\n\nexport default MicroFrontend\n","import { Router, Route, Switch } from 'react-router-dom'\nimport { createHashHistory } from 'history'\n\n// Components\nimport Container from './components/Container'\nimport Content from './components/Content'\nimport Header from './components/Header'\nimport Menu from './components/Menu'\n\n// Constants\nimport { MICROFRONTEND_NAME } from './constants'\n\n// Routes\nimport MicroFrontend from './routes/MicroFrontend'\n\nconst history = createHashHistory()\n\nconst Browse = (props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.BROWSE} />\n)\n\nconst Restaurant = (props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.RESTAURANT} />\n)\n\nconst About = (props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.ABOUT} />\n)\n\nfunction App(props) {\n  return (\n    <Router history={history}>\n      <Container>\n        <Header />\n        <Menu />\n      </Container>\n      <Content>\n        <Switch>\n          <Route exact path=\"/\" component={Browse} />\n          <Route path=\"/restaurant/:id\" component={Restaurant} />\n          <Route path=\"/about\" component={About} />\n        </Switch>\n      </Content>\n    </Router>\n  )\n}\n\nexport default App\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}