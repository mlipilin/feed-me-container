{"version":3,"sources":["components/Menu/styles.module.scss","components/Container/styles.module.scss","components/Content/styles.module.scss","components/Logo/styles.module.scss","components/Header/styles.module.scss","components/Container/index.js","components/Content/index.js","components/Logo/index.js","components/Header/index.js","components/Menu/index.js","constants.js","routes/MicroFrontend/index.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Container","props","children","className","styles","defaultProps","Content","Logo","Header","ITEMS","to","name","Menu","location","useLocation","Menu__List","map","item","Menu__ListItem","cn","Menu__ListItemLink","Menu__ListItemLink_active","pathname","MICROFRONTEND_NAME","MICROFRONTEND_HOST","process","CONTAINER_ID","TITLE","loadScript","src","Promise","resolve","reject","document","getElementById","script","createElement","onload","onerror","id","head","appendChild","safetyCall","fn","args","MicroFrontend","host","useEffect","title","loadMicroFrontend","window","unmountMicrofrontend","makeScriptUrl","useCallback","fetch","then","response","json","scripts","entrypoints","filter","e","test","all","renderMicrofrontend","catch","error","console","log","Browse","Surprise","About","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5c47694e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"styles_Menu__Z63CA\",\"Menu__List\":\"styles_Menu__List__2UKo3\",\"Menu__ListItem\":\"styles_Menu__ListItem__AT9MY\",\"Menu__ListItemLink\":\"styles_Menu__ListItemLink__3qk5D\",\"Menu__ListItemLink_active\":\"styles_Menu__ListItemLink_active__3GA8t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"styles_Container__2CW_S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"styles_Content__3ueQJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"styles_Logo__14oxi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"styles_Header__2KoFd\"};","import PropTypes from 'prop-types'\n\nimport styles from './styles.module.scss'\n\nfunction Container(props) {\n  const { children } = props\n\n  return <div className={styles.Container}>{children}</div>\n}\n\nContainer.propTypes = {\n  children: PropTypes.any,\n}\nContainer.defaultProps = {\n  children: null,\n}\n\nexport default Container\n","import PropTypes from 'prop-types'\n\nimport styles from './styles.module.scss'\n\nfunction Content(props) {\n  const { children } = props\n\n  return <div className={styles.Content}>{children}</div>\n}\n\nContent.propTypes = {\n  children: PropTypes.any,\n}\nContent.defaultProps = {\n  children: null,\n}\n\nexport default Content\n","import styles from './styles.module.scss'\n\nfunction Logo() {\n  return <div className={styles.Logo}>üçΩ Feed Me</div>\n}\n\nexport default Logo\n","// Components\nimport Logo from '../Logo'\n\nimport styles from './styles.module.scss'\n\nfunction Header() {\n  return (\n    <div className={styles.Header}>\n      <Logo />\n    </div>\n  )\n}\n\nexport default Header\n","import { Link, useLocation } from 'react-router-dom'\nimport cn from 'classnames'\n\nimport styles from './styles.module.scss'\n\nconst ITEMS = [\n  {\n    to: '/',\n    name: 'Browse Restaurants',\n  },\n  {\n    to: '/surprise',\n    name: 'Surprise Me',\n  },\n  {\n    to: '/about',\n    name: 'About',\n  },\n]\n\nfunction Menu() {\n  const location = useLocation()\n\n  return (\n    <nav className={styles.Menu}>\n      <ul className={styles.Menu__List}>\n        {ITEMS.map((item) => (\n          <li className={styles.Menu__ListItem} key={item.to}>\n            <Link\n              className={cn(styles.Menu__ListItemLink, {\n                [styles.Menu__ListItemLink_active]:\n                  item.to === location.pathname,\n              })}\n              to={item.to}\n            >\n              {item.name}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  )\n}\n\nexport default Menu\n","export const MICROFRONTEND_NAME = {\n  ABOUT: 'About',\n  BROWSE: 'Browse',\n  SURPRISE: 'Surprise',\n}\n\n// TODO: think about CORS\nexport const MICROFRONTEND_HOST = {\n  [MICROFRONTEND_NAME.ABOUT]: process.env.REACT_APP_MICROFRONTEND_HOST_ABOUT,\n  [MICROFRONTEND_NAME.BROWSE]: process.env.REACT_APP_MICROFRONTEND_HOST_BROWSE,\n  [MICROFRONTEND_NAME.SURPRISE]:\n    process.env.REACT_APP_MICROFRONTEND_HOST_SURPRISE,\n}\n","import { useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\n// Constants\nimport { MICROFRONTEND_HOST, MICROFRONTEND_NAME } from '../../constants'\n\nconst CONTAINER_ID = 'microfrontend-container'\n\nconst TITLE = {\n  [MICROFRONTEND_NAME.ABOUT]: 'About',\n  [MICROFRONTEND_NAME.BROWSE]: 'Browse Restaurants',\n  [MICROFRONTEND_NAME.SURPRISE]: 'Surprise Me',\n}\n\nfunction loadScript(src) {\n  return new Promise((resolve, reject) => {\n    if (document.getElementById(src)) {\n      return resolve()\n    }\n    const script = document.createElement('script')\n    script.onload = resolve\n    script.onerror = reject\n    script.src = src\n    script.id = src\n    document.head.appendChild(script)\n  })\n}\n\nfunction safetyCall(fn, ...args) {\n  typeof fn === 'function' && fn(...args)\n}\n\nfunction renderMicrofrontend(name) {\n  safetyCall(window[`render${name}`], CONTAINER_ID)\n}\n\nfunction unmountMicrofrontend(name) {\n  safetyCall(window[`unmount${name}`], CONTAINER_ID)\n}\n\nfunction MicroFrontend(props) {\n  const { name } = props\n\n  const host = MICROFRONTEND_HOST[name]\n\n  useEffect(() => {\n    // console.log('MOUNT', { name })\n    document.title = `${TITLE[name]} - Feed Me`\n    loadMicroFrontend()\n    return () => {\n      // console.log('UNMOUNT', { name })\n      unmountMicrofrontend(name)\n    }\n  }, [name])\n\n  const makeScriptUrl = useCallback(\n    (script) => {\n      return `${host}/${script}`\n    },\n    [host]\n  )\n\n  const loadMicroFrontend = useCallback(() => {\n    // console.log('loadMicroFrontend', { host })\n    if (!host) {\n      return\n    }\n    fetch(makeScriptUrl('asset-manifest.json'))\n      .then((response) => response.json())\n      .then(({ entrypoints }) => {\n        const scripts = entrypoints\n          .filter((e) => /static\\/js/.test(e))\n          .map(makeScriptUrl)\n        return Promise.all(scripts.map(loadScript))\n      })\n      .then(() => {\n        // console.log('all scripts are loaded')\n        renderMicrofrontend(name)\n      })\n      .catch((error) => {\n        console.log('error', error)\n      })\n  }, [host])\n\n  return <main id={CONTAINER_ID} />\n}\n\nMicroFrontend.propTypes = {\n  name: PropTypes.oneOf(Object.values(MICROFRONTEND_NAME)).isRequired,\n}\n\nexport default MicroFrontend\n","import { HashRouter as Router, Switch, Route } from 'react-router-dom'\n\n// Components\nimport Container from './components/Container'\nimport Content from './components/Content'\nimport Header from './components/Header'\nimport Menu from './components/Menu'\n\n// Constants\nimport { MICROFRONTEND_NAME } from './constants'\n\n// Routes\nimport MicroFrontend from './routes/MicroFrontend'\n\nconst Browse = (...props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.BROWSE} />\n)\n\nconst Surprise = (...props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.SURPRISE} />\n)\n\nconst About = (...props) => (\n  <MicroFrontend {...props} name={MICROFRONTEND_NAME.ABOUT} />\n)\n\nfunction App() {\n  return (\n    <Router>\n      <Container>\n        <Header />\n        <Menu />\n        <Content>\n          <Switch>\n            <Route path=\"/surprise\" component={Surprise} />\n            <Route path=\"/about\" component={About} />\n            <Route path=\"/\" component={Browse} />\n          </Switch>\n        </Content>\n      </Container>\n    </Router>\n  )\n}\n\nexport default App\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}